{"version":3,"sources":["context/UserContext.js","components/auth/AuthOptions.js","components/layout/Header.js","components/misc/ErrorNotice.js","components/misc/Todo.js","components/pages/Home.js","components/auth/Login.js","components/auth/Register.js","App.js","index.js"],"names":["createContext","AuthOptions","useContext","UserContext","userData","setUserData","history","useHistory","className","user","onClick","token","undefined","localStorage","setItem","push","Header","id","to","ErrorNotice","props","message","clearError","Todo","useState","isChecked","setIsChecked","inEditMode","setInEditMode","title","updatedTodo","setUpdatedTodo","onSubmit","e","preventDefault","updateTodo","type","value","onChange","target","name","checked","deleteTodo","Home","todos","setTodos","todo","setTodo","error","setError","useEffect","a","getItem","Axios","get","headers","data","getAllTodos","submit","post","returnedTodo","response","msg","delete","deletedTodo","_","filter","i","_id","oldTodos","cloneDeep","patch","index","findIndex","htmlFor","length","map","item","key","timestamp","createdAt","Login","email","setEmail","password","setPassword","loginUser","loginRes","Register","passwordCheck","setPasswordCheck","displayName","setDisplayName","newUser","placeholder","App","userRes","checkLoggedIn","Provider","exact","path","component","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.3d19d617.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nexport default createContext(null);\r\n","import React, { useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport UserContext from '../../context/UserContext';\r\n\r\nexport default function AuthOptions() {\r\n\t// get UserData from Context\r\n\tconst { userData, setUserData } = useContext(UserContext);\r\n\tconst history = useHistory();\r\n\r\n\tconst register = () => {\r\n\t\thistory.push('/register');\r\n\t};\r\n\r\n\tconst login = () => {\r\n\t\thistory.push('/login');\r\n\t};\r\n\r\n\tconst logout = () => {\r\n\t\tsetUserData({\r\n\t\t\ttoken: undefined,\r\n\t\t\tuser: undefined,\r\n\t\t});\r\n\r\n\t\tlocalStorage.setItem('auth-token', '');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<nav className='auth-options'>\r\n\t\t\t{userData.user ? (\r\n\t\t\t\t<button onClick={logout}>Log Out</button>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<button onClick={register}>Register</button>\r\n\t\t\t\t\t<button onClick={login}>Log In</button>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</nav>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthOptions from '../auth/AuthOptions';\r\n\r\nexport default function Header() {\r\n\treturn (\r\n\t\t<header id='header'>\r\n\t\t\t<Link to='/'>\r\n\t\t\t\t<h1 className='title'>MERN Auth Todo</h1>\r\n\t\t\t</Link>\r\n\t\t\t<AuthOptions />\r\n\t\t</header>\r\n\t);\r\n}\r\n","import React from 'react';\r\n\r\nexport default function ErrorNotice(props) {\r\n\treturn (\r\n\t\t<div className='error-notice'>\r\n\t\t\t<span>{props.message}</span>\r\n\t\t\t<button onClick={props.clearError}>X</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nexport default function Todo(props) {\r\n\tconst [isChecked, setIsChecked] = useState(false);\r\n\tconst [inEditMode, setInEditMode] = useState(false);\r\n\tconst [updatedTodo, setUpdatedTodo] = useState(props.title);\r\n\r\n\tconst submit = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tprops.updateTodo(props.id, updatedTodo);\r\n\t\tsetInEditMode(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<li>\r\n\t\t\t{inEditMode ? (\r\n\t\t\t\t<form className='checkbox-form' onSubmit={submit}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tid='addTodo'\r\n\t\t\t\t\t\tvalue={updatedTodo}\r\n\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\tsetUpdatedTodo(e.target.value)\r\n\t\t\t\t\t\t}></input>\r\n\t\t\t\t\t<input type='submit' value='Update Todo' />\r\n\t\t\t\t</form>\r\n\t\t\t) : (\r\n\t\t\t\t<form className='checkbox-form'>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\tid='todo'\r\n\t\t\t\t\t\tname='todo'\r\n\t\t\t\t\t\tchecked={isChecked}\r\n\t\t\t\t\t\tonChange={() => {\r\n\t\t\t\t\t\t\tsetIsChecked(true);\r\n\t\t\t\t\t\t\tprops.deleteTodo(props.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label name='todo' onClick={() => setInEditMode(true)}>\r\n\t\t\t\t\t\t{props.title}\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</form>\r\n\t\t\t)}\r\n\t\t</li>\r\n\t);\r\n}\r\n","import React, { useEffect, useContext, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport UserContext from '../../context/UserContext';\r\nimport Axios from 'axios';\r\nimport _ from 'lodash';\r\n\r\nimport ErrorNotice from '../misc/ErrorNotice';\r\nimport Todo from '../misc/Todo';\r\n\r\nexport default function Home() {\r\n\tconst { userData } = useContext(UserContext);\r\n\tconst [todos, setTodos] = useState([]);\r\n\tconst [todo, setTodo] = useState('');\r\n\tconst [error, setError] = useState();\r\n\tconst history = useHistory();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!userData.user) {\r\n\t\t\thistory.push('/login');\r\n\t\t}\r\n\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [userData]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst getAllTodos = async () => {\r\n\t\t\tlet token = localStorage.getItem('auth-token');\r\n\r\n\t\t\tconst todos = await Axios.get(\r\n\t\t\t\t'https://devistry-mern-backend.herokuapp.com/todos/',\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'x-auth-token': token,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tsetTodos(todos.data);\r\n\t\t};\r\n\r\n\t\tgetAllTodos();\r\n\t}, []);\r\n\r\n\tconst submit = async (e) => {\r\n\t\ttry {\r\n\t\t\te.preventDefault();\r\n\t\t\tlet token = localStorage.getItem('auth-token');\r\n\r\n\t\t\tvar returnedTodo = await Axios.post(\r\n\t\t\t\t'https://devistry-mern-backend.herokuapp.com/todos/',\r\n\t\t\t\t{ title: todo },\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'x-auth-token': token,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tsetTodo('');\r\n\t\t\tsetTodos([...todos, returnedTodo.data]);\r\n\t\t} catch (err) {\r\n\t\t\terr.response.data.msg && setError(err.response.data.msg);\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteTodo = async (id) => {\r\n\t\ttry {\r\n\t\t\tlet token = localStorage.getItem('auth-token');\r\n\r\n\t\t\tvar deletedTodo = await Axios.delete(\r\n\t\t\t\t`https://devistry-mern-backend.herokuapp.com/todos/${id}`,\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'x-auth-token': token,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tsetTodos(\r\n\t\t\t\t_.filter(todos, (i) => {\r\n\t\t\t\t\treturn i._id !== deletedTodo.data._id;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} catch (err) {\r\n\t\t\terr.response.data.msg && setError(err.response.data.msg);\r\n\t\t}\r\n\t};\r\n\r\n\t// Updates on click right now\r\n\tconst updateTodo = async (id, title) => {\r\n\t\ttry {\r\n\t\t\tlet token = localStorage.getItem('auth-token'),\r\n\t\t\t\toldTodos = _.cloneDeep(todos);\r\n\r\n\t\t\tlet updatedTodo = await Axios.patch(\r\n\t\t\t\t`https://devistry-mern-backend.herokuapp.com/todos/${id}`,\r\n\t\t\t\t{ title },\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'x-auth-token': token,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tlet index = _.findIndex(oldTodos, { _id: id });\r\n\t\t\toldTodos[index] = updatedTodo.data;\r\n\r\n\t\t\tsetTodos(oldTodos);\r\n\t\t} catch (err) {\r\n\t\t\terr.response.data.msg && setError(err.response.data.msg);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='page'>\r\n\t\t\t{error && (\r\n\t\t\t\t<ErrorNotice\r\n\t\t\t\t\tmessage={error}\r\n\t\t\t\t\tclearError={() => setError(undefined)}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t<form className='form' onSubmit={submit}>\r\n\t\t\t\t<label htmlFor='addTodo'></label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tid='addTodo'\r\n\t\t\t\t\tvalue={todo}\r\n\t\t\t\t\tonChange={(e) => setTodo(e.target.value)}></input>\r\n\t\t\t\t<input type='submit' value='Add Todo' />\r\n\t\t\t</form>\r\n\r\n\t\t\t<ul>\r\n\t\t\t\t{todos.length > 0\r\n\t\t\t\t\t? todos.map((item) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Todo\r\n\t\t\t\t\t\t\t\t\tkey={item._id}\r\n\t\t\t\t\t\t\t\t\tid={item._id}\r\n\t\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\t\tupdateTodo={updateTodo}\r\n\t\t\t\t\t\t\t\t\tdeleteTodo={deleteTodo}\r\n\t\t\t\t\t\t\t\t\ttimestamp={item.createdAt}></Todo>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: 'You have nothing todo~'}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport UserContext from '../../context/UserContext';\r\nimport Axios from 'axios';\r\nimport ErrorNotice from '../misc/ErrorNotice';\r\n\r\nexport default function Login() {\r\n\tconst [email, setEmail] = useState();\r\n\tconst [password, setPassword] = useState();\r\n\tconst [error, setError] = useState();\r\n\r\n\tconst { userData, setUserData } = useContext(UserContext);\r\n\r\n\tconst history = useHistory();\r\n\r\n\tif (userData.user) {\r\n\t\thistory.push('/');\r\n\t}\r\n\r\n\tconst submit = async (e) => {\r\n\t\ttry {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst loginUser = {\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t};\r\n\r\n\t\t\tconst loginRes = await Axios.post(\r\n\t\t\t\t'https://devistry-mern-backend.herokuapp.com/users/login',\r\n\t\t\t\tloginUser\r\n\t\t\t);\r\n\r\n\t\t\tsetUserData({\r\n\t\t\t\ttoken: loginRes.data.token,\r\n\t\t\t\tuser: loginRes.data.user,\r\n\t\t\t});\r\n\r\n\t\t\tlocalStorage.setItem('auth-token', loginRes.data.token);\r\n\r\n\t\t\thistory.push('/');\r\n\t\t} catch (err) {\r\n\t\t\terr.response.data.msg && setError(err.response.data.msg);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='page'>\r\n\t\t\t<h2>Log In</h2>\r\n\t\t\t{error && (\r\n\t\t\t\t<ErrorNotice\r\n\t\t\t\t\tmessage={error}\r\n\t\t\t\t\tclearError={() => setError(undefined)}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t<form className='form' onSubmit={submit}>\r\n\t\t\t\t<label htmlFor='login-email'>Email</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='login-email'\r\n\t\t\t\t\ttype='email'\r\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}></input>\r\n\r\n\t\t\t\t<label htmlFor='login-password'>Password</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='login-password'\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}></input>\r\n\r\n\t\t\t\t<input type='submit' value='Login' />\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport UserContext from '../../context/UserContext';\r\nimport ErrorNotice from '../misc/ErrorNotice';\r\nimport Axios from 'axios';\r\n\r\nexport default function Register() {\r\n\tconst [email, setEmail] = useState();\r\n\tconst [password, setPassword] = useState();\r\n\tconst [passwordCheck, setPasswordCheck] = useState();\r\n\tconst [displayName, setDisplayName] = useState();\r\n\tconst [error, setError] = useState();\r\n\r\n\tconst { setUserData } = useContext(UserContext);\r\n\r\n\tconst history = useHistory();\r\n\r\n\tconst submit = async (e) => {\r\n\t\ttry {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst newUser = {\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t\tpasswordCheck,\r\n\t\t\t\tdisplayName,\r\n\t\t\t};\r\n\r\n\t\t\tawait Axios.post(\r\n\t\t\t\t'https://devistry-mern-backend.herokuapp.com/users/register',\r\n\t\t\t\tnewUser\r\n\t\t\t);\r\n\r\n\t\t\t// do not have JWT yet\r\n\r\n\t\t\tconst loginRes = await Axios.post(\r\n\t\t\t\t'https://devistry-mern-backend.herokuapp.com/users/login',\r\n\t\t\t\t{\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tsetUserData({\r\n\t\t\t\ttoken: loginRes.data.token,\r\n\t\t\t\tuser: loginRes.data.user,\r\n\t\t\t});\r\n\r\n\t\t\tlocalStorage.setItem('auth-token', loginRes.data.token);\r\n\r\n\t\t\thistory.push('/');\r\n\t\t} catch (err) {\r\n\t\t\terr.response.data.msg && setError(err.response.data.msg);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='page'>\r\n\t\t\t<h2>Register</h2>\r\n\t\t\t{error && (\r\n\t\t\t\t<ErrorNotice\r\n\t\t\t\t\tmessage={error}\r\n\t\t\t\t\tclearError={() => setError(undefined)}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t<form className='form' onSubmit={submit}>\r\n\t\t\t\t<label htmlFor='register-email'>Email</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='register-email'\r\n\t\t\t\t\ttype='email'\r\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}></input>\r\n\r\n\t\t\t\t<label htmlFor='register-password'>Password</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='register-password'\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}></input>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tplaceholder='Verify Password'\r\n\t\t\t\t\tonChange={(e) => setPasswordCheck(e.target.value)}></input>\r\n\r\n\t\t\t\t<label htmlFor='register-display-name'>Display Name</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid='register-display-name'\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tonChange={(e) => setDisplayName(e.target.value)}></input>\r\n\r\n\t\t\t\t<input type='submit' value='Register' />\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\nimport Axios from 'axios';\r\nimport Header from './components/layout/Header';\r\nimport Home from './components/pages/Home';\r\nimport Login from './components/auth/Login';\r\nimport Register from './components/auth/Register';\r\nimport UserContext from './context/UserContext';\r\n\r\nimport './style.scss';\r\n\r\nexport default function App() {\r\n\tconst [userData, setUserData] = useState({\r\n\t\ttoken: undefined,\r\n\t\tuser: undefined,\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst checkLoggedIn = async () => {\r\n\t\t\tlet token = localStorage.getItem('auth-token');\r\n\r\n\t\t\t// If never declared, token is 'null' which returns 500 error\r\n\t\t\tif (token === null) {\r\n\t\t\t\tlocalStorage.setItem('auth-token', '');\r\n\t\t\t\ttoken = '';\r\n\t\t\t}\r\n\r\n\t\t\tconst tokenRes = await Axios.post(\r\n\t\t\t\t'https://devistry-mern-backend.herokuapp.com/users/tokenIsValid',\r\n\t\t\t\tnull,\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'x-auth-token': token,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tif (tokenRes.data) {\r\n\t\t\t\tconst userRes = await Axios.get(\r\n\t\t\t\t\t'https://devistry-mern-backend.herokuapp.com/users/',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'x-auth-token': token,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\tsetUserData({\r\n\t\t\t\t\ttoken,\r\n\t\t\t\t\tuser: userRes.data,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tcheckLoggedIn();\r\n\t}, []);\r\n\r\n\t// Everything within UserContext.Provider can use/see userData and setUserData\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<BrowserRouter>\r\n\t\t\t\t<UserContext.Provider value={{ userData, setUserData }}>\r\n\t\t\t\t\t<Header />\r\n\t\t\t\t\t<div className='container'>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path='/' component={Home} />\r\n\t\t\t\t\t\t\t<Route path='/login' component={Login} />\r\n\t\t\t\t\t\t\t<Route path='/register' component={Register} />\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</UserContext.Provider>\r\n\t\t\t</BrowserRouter>\r\n\t\t</>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.querySelector('#root'));\r\n"],"sourceRoot":""}